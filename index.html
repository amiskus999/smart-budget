<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Smart Budgeting</title><script src="https://cdn.tailwindcss.com"></script><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><style>body{font-family:'Inter',sans-serif;transition:background-color .3s,color .3s}body.dark{background-color:#1a202c;color:#e2e8f0}body.dark .bg-white{background-color:#2d3748;color:#e2e8f0}body.dark .border-gray-200{border-color:#4a5568}body.dark input,body.dark select,body.dark textarea{background-color:#4a5568;color:#e2e8f0;border-color:#6b7280}body.dark input::placeholder,body.dark textarea::placeholder{color:#a0aec0}body.dark button{background-color:#4c51bf}body.dark button:hover{background-color:#5a62c9}body.dark .remove-expense{background-color:#ef4444}body.dark .remove-expense:hover{background-color:#dc2626}body.dark #saveBudgetBtn{background-color:#22c55e}body.dark #saveBudgetBtn:hover{background-color:#16a34a}body.dark .text-gray-700{color:#cbd5e0}body.dark .chart-container{background-color:#2d3748;border-color:#4a5568}@media (max-width:768px){.container{padding:1rem}.grid{grid-template-columns:1fr}header .flex{flex-wrap:wrap;gap:.5rem}header button{flex-grow:1}}@media print{.no-print,header,.grid>section:first-child .mb-4:first-child,.grid>section:first-child #addExpenseBtn,.grid>section:first-child #saveBudgetBtn,.grid>section:first-child #printBudgetBtn,#expenseCategorySelect,.remove-expense,.expense-type,#feedbackSection{display:none!important}.expense-name,.expense-value,#incomeInput{border:none!important;background:none!important;padding:0!important;margin:0!important;display:inline!important;width:auto!important;box-shadow:none!important;color:black!important}#expensesContainer .expense-item{display:flex!important;justify-content:space-between!important;padding:.2rem 0!important;border-bottom:1px dashed #ccc!important;margin-bottom:.2rem!important}.container{width:100%!important;max-width:none!important;padding:0!important}.grid{grid-template-columns:1fr!important;gap:0!important}section{box-shadow:none!important;border:none!important;margin-top:0!important;padding:1rem!important}.chart-container{padding:.5rem!important;box-shadow:none!important;border:none!important}body,h1,h2,h3,p,span,strong{color:black!important}body.dark .bg-white,body.dark .chart-container{background-color:white!important;color:black!important}body.dark .border-gray-200{border-color:#e2e8f0!important}}</style></head><body class="bg-gray-100 text-gray-900 min-h-screen flex flex-col items-center"><div class="container mx-auto p-6 max-w-4xl w-full"><header class="flex justify-between items-center mb-8 no-print"><h1 class="text-4xl font-extrabold text-blue-600">Smart Budget</h1><div class="flex space-x-2"><button id="themeToggle" class="px-4 py-2 rounded-full bg-gray-200 text-gray-800 dark:bg-gray-700 dark:text-gray-200 shadow-md transition-colors duration-300 hover:bg-gray-300 dark:hover:bg-gray-600"></button></div></header><div class="grid grid-cols-1 gap-8 mb-8"><section class="bg-white p-6 rounded-xl shadow-lg border border-gray-200"><h2 class="text-2xl font-bold mb-6 text-gray-700">Set Your Budget</h2><div class="mb-4"><label for="monthSelect" class="block text-sm font-medium text-gray-700 mb-1">Select Month:</label><div class="flex items-center space-x-2"><button id="prevMonthBtn" class="px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200 shadow-sm">‚Üê</button><select id="monthSelect" class="mt-1 block flex-grow pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm"></select><button id="nextMonthBtn" class="px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors duration-200 shadow-sm">‚Üí</button></div></div><div class="mb-4"><label for="incomeInput" class="block text-sm font-medium text-gray-700 mb-1">Income üí∞:</label><input type="number" id="incomeInput" placeholder="e.g., 3000" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 p-2"></div><div id="expensesContainer" class="mb-6 space-y-4"><h3 class="text-xl font-semibold mb-3 text-gray-700">Expenses:</h3><div class="expense-item flex items-center space-x-2"><input type="text" placeholder="Expense Name (e.g., Rent)" class="expense-name flex-grow rounded-md border-gray-300 shadow-sm p-2"><input type="number" placeholder="Amount" class="expense-value w-28 rounded-md border-gray-300 shadow-sm p-2"><select class="expense-type rounded-md border-gray-300 shadow-sm p-2"><option value="amount">$</option><option value="percentage">%</option></select><button class="remove-expense w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors duration-200 text-xl font-bold">‚àí</button></div></div><button id="addExpenseBtn" class="w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600 transition-colors duration-200 mb-4 shadow-md">‚ûï Add Expense</button><button id="saveBudgetBtn" class="w-full bg-green-500 text-white py-3 rounded-md hover:bg-green-600 transition-colors duration-200 shadow-md text-lg font-semibold">Save Budget</button><button id="printBudgetBtn" class="w-full mt-4 bg-purple-600 text-white py-3 rounded-md hover:bg-purple-700 transition-colors duration-200 shadow-md text-lg font-semibold">üñ®Ô∏è Print Budget</button></section><section class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 flex flex-col"><h2 class="text-2xl font-bold mb-6 text-gray-700">Budget Overview</h2><div id="budgetSummary" class="mb-6 space-y-2 text-lg"><p><strong>Selected Month:</strong> <span id="summaryMonth"></span></p><p><strong>Income üí∞:</strong> $<span id="summaryIncome">0.00</span></p><p><strong>Total $ Spent:</strong> $<span id="summaryExpenses">0.00</span></p><p><strong>Remaining $:</strong> $<span id="summaryRemaining" class="font-bold">0.00</span></p></div><div id="detailedExpenses" class="mt-6 border-t pt-4 border-gray-200"><h3 class="text-xl font-semibold mb-3 text-gray-700">Allocated Expenses:</h3><div id="detailedExpensesList" class="space-y-1 text-base"></div></div><div class="flex-grow bg-gray-50 p-4 rounded-lg shadow-inner border border-gray-100 chart-container mt-6"><canvas id="spendingChart"></canvas></div></section></div><section class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mt-8"><h2 class="text-2xl font-bold mb-6 text-gray-700">Individual Expense History</h2><div class="mb-4 no-print"><label for="expenseCategorySelect" class="block text-sm font-medium text-gray-700 mb-1">Select Expense Category:</label><select id="expenseCategorySelect" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md shadow-sm"><option value="">-- Select a category --</option></select></div><div class="flex-grow bg-gray-50 p-4 rounded-lg shadow-inner border border-gray-100 chart-container"><canvas id="individualExpenseChart"></canvas></div></section><section id="feedbackSection" class="bg-white p-6 rounded-xl shadow-lg border border-gray-200 mt-8 no-print"><h2 class="text-2xl font-bold mb-6 text-gray-700">Send Us Feedback!</h2><iframe src="https://docs.google.com/forms/d/e/1FAIpQLSetNl1PiGqjILYt5iFZ2XRXyps6RMG3xxkROC6XHOU0bS-xPA/viewform?embedded=true" width="100%" height="500" frameborder="0" marginheight="0" marginwidth="0" class="rounded-md shadow-md">Loading...</iframe></section></div><script>const themeToggle=document.getElementById('themeToggle'),monthSelect=document.getElementById('monthSelect'),incomeInput=document.getElementById('incomeInput'),expensesContainer=document.getElementById('expensesContainer'),addExpenseBtn=document.getElementById('addExpenseBtn'),saveBudgetBtn=document.getElementById('saveBudgetBtn'),budgetSummary=document.getElementById('budgetSummary'),summaryMonth=document.getElementById('summaryMonth'),summaryIncome=document.getElementById('summaryIncome'),summaryExpenses=document.getElementById('summaryExpenses'),summaryRemaining=document.getElementById('summaryRemaining'),spendingChartCanvas=document.getElementById('spendingChart'),printBudgetBtn=document.getElementById('printBudgetBtn'),detailedExpensesList=document.getElementById('detailedExpensesList'),prevMonthBtn=document.getElementById('prevMonthBtn'),nextMonthBtn=document.getElementById('nextMonthBtn'),expenseCategorySelect=document.getElementById('expenseCategorySelect'),individualExpenseChartCanvas=document.getElementById('individualExpenseChart');let spendingChart,individualExpenseChart,budgets={};const LOCAL_STORAGE_KEY='smartBudgetAppData';
function getCurrentBudgetInputs(){const income=parseFloat(incomeInput.value)||0,expenses=[];document.querySelectorAll('.expense-item').forEach(item=>{const name=item.querySelector('.expense-name').value.trim(),value=parseFloat(item.querySelector('.expense-value').value)||0,type=item.querySelector('.expense-type').value;if(name){expenses.push({name,value,type})}});return{income,expenses}}
function updateBudgetSummary(){const {income,expenses}=getCurrentBudgetInputs(),selectedMonthText=monthSelect.options[monthSelect.selectedIndex].text;let totalExpenses=0;detailedExpensesList.innerHTML='';if(expenses.length>0){expenses.forEach(expense=>{let expenseAmount=0;if(expense.type==='amount'){expenseAmount=expense.value}else if(expense.type==='percentage'){expenseAmount=(income*(expense.value/100))}totalExpenses+=expenseAmount;const expenseItem=document.createElement('p');expenseItem.className='flex justify-between items-center text-lg font-semibold text-gray-900 dark:text-gray-200';expenseItem.innerHTML=`<span>${expense.name}:</span> <span class="font-medium">$${expenseAmount.toFixed(2)}</span>`;detailedExpensesList.appendChild(expenseItem)})}else{detailedExpensesList.innerHTML='<p class="text-gray-900 italic dark:text-gray-400 text-lg font-semibold">No expenses allocated for this month.</p>'}const remainingBudget=income-totalExpenses;summaryMonth.textContent=selectedMonthText;summaryIncome.textContent=income.toFixed(2);summaryExpenses.textContent=totalExpenses.toFixed(2);summaryRemaining.textContent=remainingBudget.toFixed(2);summaryRemaining.classList.remove('text-green-600','text-red-600');if(remainingBudget>=0){summaryRemaining.classList.add('text-green-600')}else{summaryRemaining.classList.add('text-red-600')}}
document.addEventListener('DOMContentLoaded',async()=>{loadBudgets();populateMonthSelect();renderCurrentMonthBudget();updateChart();populateExpenseCategoriesSelect();updateIndividualExpenseChart();applySavedTheme();updateThemeToggleButton();printBudgetBtn.addEventListener('click',()=>{updateChart();updateIndividualExpenseChart(expenseCategorySelect.value);window.print();const restoreCharts=()=>{updateChart();updateIndividualExpenseChart(expenseCategorySelect.value);window.removeEventListener('afterprint',restoreCharts)};window.addEventListener('afterprint',restoreCharts)})});function updateThemeToggleButton(){const isDarkMode=document.body.classList.contains('dark');themeToggle.textContent=isDarkMode?'‚òÄÔ∏è':'üåô'}themeToggle.addEventListener('click',()=>{document.body.classList.toggle('dark');const isDarkMode=document.body.classList.contains('dark');localStorage.setItem('theme',isDarkMode?'dark':'light');updateThemeToggleButton();updateChart();updateIndividualExpenseChart(expenseCategorySelect.value)});function applySavedTheme(){const savedTheme=localStorage.getItem('theme');if(savedTheme==='dark'){document.body.classList.add('dark')}}function populateMonthSelect(){monthSelect.innerHTML='';const today=new Date(),currentMonth=today.getMonth(),currentYear=today.getFullYear();for(let i=11;i>=0;i--){const date=new Date(currentYear,currentMonth-i,1),monthName=date.toLocaleString('default',{month:'long'}),year=date.getFullYear(),monthValue=`${year}-${String(date.getMonth()+1).padStart(2,'0')}`;const option=document.createElement('option');option.value=monthValue;option.textContent=`${monthName} ${year}`;monthSelect.appendChild(option)}const endYear=2070;for(let y=currentYear;y<=endYear;y++){for(let m=0;m<12;m++){if(y===currentYear&&m<currentMonth){continue}const date=new Date(y,m,1),monthName=date.toLocaleString('default',{month:'long'}),year=date.getFullYear(),monthValue=`${year}-${String(date.getMonth()+1).padStart(2,'0')}`;if(!Array.from(monthSelect.options).some(opt=>opt.value===monthValue)){const option=document.createElement('option');option.value=monthValue;option.textContent=`${monthName} ${year}`;monthSelect.appendChild(option)}}}const currentMonthFormatted=`${currentYear}-${String(currentMonth+1).padStart(2,'0')}`;monthSelect.value=currentMonthFormatted}monthSelect.addEventListener('change',renderCurrentMonthBudget);prevMonthBtn.addEventListener('click',()=>{const currentIndex=monthSelect.selectedIndex;if(currentIndex>0){monthSelect.selectedIndex=currentIndex-1;renderCurrentMonthBudget()}});nextMonthBtn.addEventListener('click',()=>{const currentIndex=monthSelect.selectedIndex;if(currentIndex<monthSelect.options.length-1){monthSelect.selectedIndex=currentIndex+1;renderCurrentMonthBudget()}});addExpenseBtn.addEventListener('click',()=>{addExpenseRow({name:'',value:'',type:'amount'})});function addExpenseRow(expenseData={name:'',value:'',type:'amount'}){const expenseItem=document.createElement('div');expenseItem.className='expense-item flex items-center space-x-2 mb-2';expenseItem.innerHTML=`\n                <input type="text" placeholder="Expense Name (e.g., Rent)" class="expense-name flex-grow rounded-md border-gray-300 shadow-sm p-2" value="${expenseData.name}">\n                <input type="number" placeholder="Amount" class="expense-value w-28 rounded-md border-gray-300 shadow-sm p-2" value="${expenseData.value}">\n                <select class="expense-type rounded-md border-gray-300 shadow-sm p-2">\n                    <option value="amount" ${expenseData.type==='amount'?'selected':''}>$</option>\n                    <option value="percentage" ${expenseData.type==='percentage'?'selected':''}>%</option>\n                </select>\n                <button class="remove-expense w-8 h-8 flex items-center justify-center bg-red-500 text-white rounded-md hover:bg-red-600 transition-colors duration-200 text-xl font-bold">‚àí</button>\n            `;expensesContainer.appendChild(expenseItem);expenseItem.querySelector('.remove-expense').addEventListener('click',()=>{expenseItem.remove();updateBudgetSummary();updateChart();populateExpenseCategoriesSelect();updateIndividualExpenseChart(expenseCategorySelect.value)});expenseItem.querySelector('.expense-name').addEventListener('input',()=>{updateBudgetSummary();updateChart();populateExpenseCategoriesSelect();updateIndividualExpenseChart(expenseCategorySelect.value)});expenseItem.querySelector('.expense-value').addEventListener('input',()=>{updateBudgetSummary();updateChart();updateIndividualExpenseChart(expenseCategorySelect.value)});expenseItem.querySelector('.expense-type').addEventListener('change',()=>{updateBudgetSummary();updateChart();updateIndividualExpenseChart(expenseCategorySelect.value)})}function clearExpenseRows(){expensesContainer.innerHTML=''}function renderCurrentMonthBudget(){const selectedMonth=monthSelect.value,monthData=budgets[selectedMonth];clearExpenseRows();if(monthData){incomeInput.value=monthData.income;monthData.expenses.forEach(expense=>addExpenseRow(expense))}else{incomeInput.value='';addExpenseRow()}updateBudgetSummary()}function loadBudgets(){const savedData=localStorage.getItem(LOCAL_STORAGE_KEY);if(savedData){try{budgets=JSON.parse(savedData)}catch(e){console.error("Error parsing stored budget data:",e);budgets={}}}else{budgets={}}}function saveBudgets(){localStorage.setItem(LOCAL_STORAGE_KEY,JSON.stringify(budgets))}function updateChart(){const monthLabels=[],incomeData=[],expensesData=[];const sortedMonths=Object.keys(budgets).sort((a,b)=>new Date(a)-new Date(b));sortedMonths.forEach(monthKey=>{const monthData=budgets[monthKey];const[year,monthNum]=monthKey.split('-');const monthName=new Date(year,parseInt(monthNum)-1).toLocaleString('default',{month:'short'});monthLabels.push(`${monthName} ${year}`);incomeData.push(monthData.income);let totalExpenses=0;monthData.expenses.forEach(expense=>{if(expense.type==='amount'){totalExpenses+=expense.value}else if(expense.type==='percentage'){totalExpenses+=(monthData.income*(expense.value/100))}});expensesData.push(totalExpenses)});const chartData={labels:monthLabels,datasets:[{label:'üí∞',data:incomeData,borderColor:'rgb(75, 192, 192)',backgroundColor:'rgba(75, 192, 192, 0.2)',tension:.1,fill:true},{label:'$ Spent',data:expensesData,borderColor:'rgb(255, 99, 132)',backgroundColor:'rgba(255, 99, 132, 0.2)',tension:.1,fill:true}]};const chartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top',labels:{color:document.body.classList.contains('dark')?'#e2e8f0':'#4a5568'}},title:{display:true,text:'Monthly Income vs. Expenses',color:document.body.classList.contains('dark')?'#e2e8f0':'#4a5568'}},scales:{x:{ticks:{color:document.body.classList.contains('dark')?'#cbd5e0':'#4a5568'},grid:{color:document.body.classList.contains('dark')?'#4a5568':'#e2e8f0'}},y:{beginAtZero:true,ticks:{color:document.body.classList.contains('dark')?'#cbd5e0':'#4a5568'},grid:{color:document.body.classList.contains('dark')?'#4a5568':'#e2e8f0'}}}};if(spendingChart){spendingChart.destroy()}spendingChart=new Chart(spendingChartCanvas,{type:'line',data:chartData,options:chartOptions})}function populateExpenseCategoriesSelect(){const categories=new Set();for(const monthKey in budgets){budgets[monthKey].expenses.forEach(expense=>{if(expense.name){categories.add(expense.name)}})}expenseCategorySelect.innerHTML='<option value="">-- Select a category --</option>';categories.forEach(category=>{const option=document.createElement('option');option.value=category;option.textContent=category;expenseCategorySelect.appendChild(option)});const currentSelection=expenseCategorySelect.dataset.lastSelected||'';if(categories.has(currentSelection)){expenseCategorySelect.value=currentSelection}else{expenseCategorySelect.value=''}}function updateIndividualExpenseChart(selectedCategory){const monthLabels=[],expenseValues=[],isDarkMode=document.body.classList.contains('dark');const sortedMonths=Object.keys(budgets).sort((a,b)=>new Date(a)-new Date(b));sortedMonths.forEach(monthKey=>{const monthData=budgets[monthKey];const[year,monthNum]=monthKey.split('-');const monthName=new Date(year,parseInt(monthNum)-1).toLocaleString('default',{month:'short'});monthLabels.push(`${monthName} ${year}`);let expenseAmount=0;if(selectedCategory){const foundExpense=monthData.expenses.find(exp=>exp.name===selectedCategory);if(foundExpense){if(foundExpense.type==='amount'){expenseAmount=foundExpense.value}else if(foundExpense.type==='percentage'){expenseAmount=(monthData.income*(foundExpense.value/100))}}}expenseValues.push(expenseAmount)});const chartData={labels:monthLabels,datasets:[{label:selectedCategory?`${selectedCategory} ($)`:'No Category Selected',data:expenseValues,borderColor:selectedCategory?'rgb(54, 162, 235)':'rgb(150, 150, 150)',backgroundColor:selectedCategory?'rgba(54, 162, 235, 0.2)':'rgba(150, 150, 150, 0.1)',tension:.1,fill:true}]};const chartOptions={responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'top',labels:{color:isDarkMode?'#e2e8f0':'#4a5568'}},title:{display:true,text:selectedCategory?`Spending History for ${selectedCategory}`:'Select an Expense Category to view history',color:isDarkMode?'#e2e8f0':'#4a5568'}},scales:{x:{ticks:{color:isDarkMode?'#cbd5e0':'#4a5568'},grid:{color:isDarkMode?'#4a5568':'#e2e8f0'}},y:{beginAtZero:true,ticks:{color:isDarkMode?'#cbd5e0':'#4a5568'},grid:{color:isDarkMode?'#4a5568':'#e2e8f0'}}}};if(individualExpenseChart){individualExpenseChart.destroy()}individualExpenseChart=new Chart(individualExpenseChartCanvas,{type:'line',data:chartData,options:chartOptions});expenseCategorySelect.dataset.lastSelected=selectedCategory}expenseCategorySelect.addEventListener('change',event=>{updateIndividualExpenseChart(event.target.value)});themeToggle.addEventListener('click',()=>{setTimeout(()=>{updateChart();updateIndividualExpenseChart(expenseCategorySelect.value)},100)});function alertUser(message,type='success'){const alertBox=document.createElement('div');alertBox.textContent=message;alertBox.style.cssText=`\n                position: fixed;\n                bottom: 20px;\n                left: 50%;\n                transform: translateX(-50%);\n                padding: 10px 20px;\n                border-radius: 8px;\n                color: white;\n                font-weight: bold;\n                z-index: 1000;\n                opacity: 0;\n                transition: opacity 0.5s ease-in-out;\n            `;if(type==='success'){alertBox.style.backgroundColor='#4CAF50'}else if(type==='error'){alertBox.style.backgroundColor='#f44336'}else{alertBox.style.backgroundColor='#333'}document.body.appendChild(alertBox);setTimeout(()=>{alertBox.style.opacity='1'},10);setTimeout(()=>{alertBox.style.opacity='0';alertBox.addEventListener('transitionend',()=>alertBox.remove())},3000)}</script></body></html>
